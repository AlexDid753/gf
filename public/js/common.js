webpackJsonp([2],{49:function(e,t,n){e.exports=n(50)},50:function(e,t,n){window._=n(3),window.$=window.jQuery=n(2),n(51),n(52),n(53),n(54)},51:function(e,t){$(document).on("keyup keypress","form",function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1}),$(document).on("submit",".ajax-form",function(e){e.preventDefault();var t=$(this),n=t.data("success"),i=t.data("error"),o=t.find('[type="submit"]'),a=new FormData($(this)[0]);t.find(".error").html(""),o.attr("disabled",!0),$.ajax({url:t.attr("action"),type:"post",data:a,async:!1,cache:!1,contentType:!1,enctype:"multipart/form-data",processData:!1,success:function(e){o.attr("disabled",!1),$(document).trigger(n,[t,e])},error:function(e){o.attr("disabled",!1),$(document).trigger(i,[t,e])}})}).on("form:success",function(e,t,n){}).on("form:error",function(e,t,n){t.find(".error.main-error").html(n.responseJSON.message),$.each(n.responseJSON.errors,function(e,n){var i=e.split(".");i.forEach(function(e,t){t&&(i[t]="["+e+"]")}),e=i.join(""),n.forEach(function(e,t){n[t]=e.replace(/\.(\d+)\./g," ").replace("_"," ")}),t.find('[name="'+e+'"]').next(".error").html(n.join())})})},52:function(e,t){$(document).on("change",".upload-image-file",function(e){e.preventDefault();var t=$(this),n=t.closest(".form-group").find(".upload-image-id"),i=t.closest(".form-group").find(".upload-image-name"),o=t.closest(".form-group").find(".upload-image-preview"),a=new FormData;a.append("image",t.prop("files")[0]),a.append("_token",$('meta[name="csrf-token"]').attr("content")),$.ajax({url:"/admin/image/upload",type:"post",data:a,async:!1,cache:!1,contentType:!1,enctype:"multipart/form-data",processData:!1,dataType:"json",success:function(e){console.log(e),n.val(e.id),i.val(e.alt),o.html('<img src="'+e.url+'">')},error:function(e){console.log(e)}})}).on("click",".upload-image-button",function(){$(this).closest(".form-group").find(".upload-image-file").click()})},53:function(e,t){$(function(){$(".multi").length&&($(".multi .item").append('\n        <div class="multi-controls">\n            <div class="add"></div>        \n            <div class="delete"></div>        \n        </div>\n    '),$(".multi").each(function(){1===$(this).find(".item").length&&$(this).find(".delete").hide()}),$(document).on("click",".multi-controls .add",function(){var e=$(this).closest(".multi"),t=$(this).closest(".item"),n=$("<div>").append(e.find(".item:first").clone()).html(),i=(new Date).getTime()/1e3|0;$template=$(n.replace(/\[(\d+)\]/g,"["+i+"]")),$template.find("input, textarea").val(""),$template.find(".upload-image-preview").html(""),t.after($template),e.find(".delete").show()}),$(document).on("click",".multi-controls .delete",function(){var e=$(this).closest(".multi"),t=$(this).closest(".item"),n=e.find(".item").length-1;t.remove(),n<=1&&e.find(".item .delete").hide()}))})},54:function(e,t){"undefined"!=typeof tinymce&&tinymce.init({selector:".editor",plugins:"image, link, code",toolbar:"link image code",language:"ru"})}},[49]);